<!DOCTYPE html>
<html lang="en">



<head>
<!-- loads the http over https ssl - welcome to my website! 
                                                    follow me at my twitter  --> 
<script type="text/javascript">
var host = "spaceg.github.io";
if ((host == window.location.host) && (window.location.protocol != "https:"))
    window.location.protocol = "https";
</script>
<!--
    <script type="text/javascript">
// jQuery to collapse the navbar on scroll
$(window).scroll(function() {
    if ($(".navbar").offset().top > 50) {
        $(".navbar-fixed-top").addClass("top-nav-collapse");
    } else {
        $(".navbar-fixed-top").removeClass("top-nav-collapse");
    }
});

// jQuery for page scrolling feature - requires jQuery Easing plugin
$(function() {
    $('a.page-scroll').bind('click', function(event) {
        var $anchor = $(this);
        $('html, body').stop().animate({
            scrollTop: $($anchor.attr('href')).offset().top
        }, 1500, 'easeInOutExpo');
        event.preventDefault();
    });
});

// Closes the Responsive Menu on Menu Item Click
$('.navbar-collapse ul li a').click(function() {
    $('.navbar-toggle:visible').click();
});
</script>

-->
<meta name="
    description" content="Gatsas, Lucas Gatsas - Web Developer/ UI/UX Designer, Senior 
    Front End Engineer, Mobile App, Mobile Device, Responsive Mobile App, Web 
    Applications, Web App, iPhone, iPad, App, Responsive, Web, Web Design, Agency 
    for digital communication, St. Gallen, Zuerich, Switzerland, Swiss Web, Swiss 
    App, Swiss, Start Up, Start Ups, Start Up St. Gallen, Start Up Zuerich, Host, 
    Hosting, Web Host, Webspace, Server, Server Architecture, Server Architektur, 
    Server Administration, Server App, GitHub Hosting, Git, Github Social Coding, 
    Code, Coding, Programming, Programmierung, Xml, Xhtml, Html, Html5, Css, Css3, 
    Javascript, js, Jquery, Node.js, Bootsrap Framework, PHP, Mysql, Database, Datenbank, 
    myPHPAdmin, Python, Django Framework, Wordpress CMS, CMS, e-Commerce CMS, Shopify, 
    e - Shop, WebShop, e -mail Newsletter Applications, e -Mail Payment Service, PayPal, 
    Open SLL, SLL, https, AntiVirus
    ">
      <meta name="
    keywords" content="Gatsas, Lucas Gatsas - Web Developer/ UI/UX Designer, Senior 
    Front End Engineer, Mobile App, Mobile Device, Responsive Mobile App, Web 
    Applications, Web App, iPhone, iPad, App, Responsive, Web, Web Design, Agency 
    for digital communication, St. Gallen, Zuerich, Switzerland, Swiss Web, Swiss 
    App, Swiss, Start Up, Start Ups, Start Up St. Gallen, Start Up Zuerich, Host, 
    Hosting, Web Host, Webspace, Server, Server Architecture, Server Architektur, 
    Server Administration, Server App, GitHub Hosting, Git, Github Social Coding, 
    Code, Coding, Programming, Programmierung, Xml, Xhtml, Html, Html5, Css, Css3, 
    Javascript, js, Jquery, Node.js, Bootsrap Framework, PHP, Mysql, Database, Datenbank, 
    myPHPAdmin, Python, Django Framework, Wordpress CMS, CMS, e-Commerce CMS, Shopify, 
    e - Shop, WebShop, e -mail Newsletter Applications, e -Mail Payment Service, PayPal, 
    Open SLL, SLL, https, AntiVirus
    ">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Hello, my Name is @LucasGatsas. I'm a Designer & Front-End Engineer based in the City of Saint Gall, Switzerland. And this is my GitHub Contributions - Repositories - Public Activity Site!">
    <link rel="shortcut icon" href="https://spaceg.github.io/img/favicon-7326478236.png" type="image/x-icon" />
    <title>Implement Passport.js authentication with Sails.js ~0.10 - l.g</title>
    <meta property="og:image" content="/img/fbmeta324123534t234qt.png"/>
    <meta property="og:title" content="Hello, my Name is @LucasGatsas. I'm a Designer & Front-End Engineer based in the City of Saint Gall, Switzerland. And this is my GitHub Contributions - Repositories - Public Activity Site!"/>
    <meta property="og:site_name" content="Hello, my Name is @LucasGatsas. I'm a Designer & Front-End Engineer based in the City of Saint Gall, Switzerland. And this is my GitHub Contributions - Repositories - Public Activity Site!"/>
    <link rel="canonical" href="https://spaceg.github.io/2015/01/17/sails.js/">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/spacegstylesheets.css">
    <link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Playfair+Display:400,700,900,400italic,700italic,900italic' rel='stylesheet' type='text/css'>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href="https://gist-assets.github.com/assets/embed-b67021dc07195830cc157f7720b938fb.css" rel="stylesheet" type="text/css">
    <style>#preloader {position:fixed;top:0;left:0;right:0;bottom:0;background-color:#fff; /* change if the mask should have another color then white */z-index:99; /* makes sure it stays on top */}#status {width:200px;height:200px;position:absolute;left:50%; /* centers the loading animation horizontally one the screen */top:50%; /* centers the loading animation vertically one the screen */background-image:url(); /* path to your loading animation */background-repeat:no-repeat;background-position:center;margin:-100px 0 0 -100px; /* is width and height divided by two */}ul, ol {margin-top: 0;margin-bottom: 10px;list-style: none;}.navbar-inverse {background-color: #FFF;border-color: #FFFFFF;}</style><!-- <link rel="stylesheet" href="/css/prettify.css">--> <style>header.intro-header {background: #6f5499;background: no-repeat center center;background-attachment: scroll;-webkit-background-size: cover;-moz-background-size: cover;background-size: cover;-o-background-size: cover;}/* Preloader */#preloader {position:fixed;top:0;left:0;right:0;bottom:0;background-color:#fff; /* change if the mask should have another color then white */z-index:99; /* makes sure it stays on top */}#status {width:200px;height:200px;position:absolute;left:50%; /* centers the loading animation horizontally one the screen */top:50%; /* centers the loading animation vertically one the screen */background-image:url(https://spaceg.github.io/img/hex-loader2.gif); /* path to your loading animation */background-repeat:no-repeat;background-position:center;margin:-100px 0 0 -100px; /* is width and height divided by two */} li {
list-style: none;
}</style>
</head>




<body>
<div id="preloader">
    <div id="status">&nbsp;</div>
</div>

    <!--<a href="https://github.com/SpaceG/CleanMagicMedium-Jekyll-V.0.2.0"><img style="z-index:3;position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/c6286ade715e9bea433b4705870de482a654f78a/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f77686974655f6666666666662e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_white_ffffff.png"></a> -->
<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapses-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/" id="blog-title-left-top">g</a>
        </div>   

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">




  <li class="dropdown">
                <a href="#portfolioModal2" data-toggle="modal"><i class="fa fa-random" id="icon-top"></i></a>
                <ul class="dropdown-menu">
           <!--        <li>
                    <a href="/">Home</a>
                </li>
                    <li><a href="https://spaceg.github.io/about">About Me</a></li>
                    <li><a href="https://spaceg.github.io/archive/">Archive</a></li> -->
                  <!--  <li class="divider"></li>
                   
                  <li>
                    <a href="https://github.com/spaceg"><i class="fa fa-github" id="github-icon-top"></i></a>
                </li>
                    <li>
                    <a href="https://github.com/spaceg"><i class="fa fa-github" id="github-icon-top"></i></a>
                </li> -->
                </ul>
            </li>


     



                    <li>

                
   <a class="navbar-brand portfolio-link" href="#portfolioModal1" data-toggle="modal"><img src="https://pbs.twimg.com/profile_images/562741191653875712/93TyTG3x.png" id="small-img-nav" width="40" height="40" class="img-circle" alt="newspace"></a>
                    </li>

               <li>
                        <a href="https://www.twitter.com/LucasGatsas" id="roundbutton"><i class="fa fa-twitter"></i>LucasGatsas</a>
                    </li>

                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<!--

<nav class="navbar navbar-inverse navbar-fixed-top-top" role="navigation" style="display: block;">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" id="toggle-bottom-fadeout">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
        <a class="navbar-brand" href="https://twitter.com/LucasGatsas"><img src="https://pbs.twimg.com/profile_images/507561018919096320/9EzEDget_400x400.jpeg" id="small-img-nav" width="40" height="40" class="img-circle" alt="newspace"></a>
            </div>
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapses-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="https://www.twitter.com/LucasGatsas" id="roundbutton"><i class="fa fa-twitter"></i> LucasGatsas</a>
                    </li>
                 <li>
                        <a href="/about/">Start Up's</a>
                    </li> 
                   <li>
                        <a href="#">Contact</a>
                    </li> 
                </ul>
            </div>
            
        </div>
     
    </nav>

-->


<!-- Portfolio Modals -->
    <div class="portfolio-modal modal fade" id="portfolioModal1" tabindex="-1" role="dialog" aria-hidden="true" style="padding-right:0px;">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <h1 class="font-style-inline-small-h1">l.g</h1>
                            <hr class="star-primary">
                            <img src="https://pbs.twimg.com/profile_images/562741191653875712/93TyTG3x.png" class="img-responsive img-centered" alt="">
                            <p class="font-style-inline-small">
                                Hello, my name is Lucas Gatsas, I'm a Front End Engineer 
                                and Web Developer from Switzerland.
                                <a href="https://www.twitter.com/LucasGatsas">follow</a>. <br> 
                                <a href="https://www.github.com/spaceg">    <i class="fa fa-github"></i> </a> 
                                <a href="https://www.twitter.com/LucasGatsas"><i class="fa fa-twitter"></i> </a>    
                                <a href="https://plus.google.com/101826267816845608605/posts"> <i class="fa fa-google-plus"></i></a> 
                            </p>
                          <!--  <ul class="list-inline item-details">
                                <li>Client:
                                    <strong><a href="">Start Bootstrap</a>
                                    </strong>
                                </li>
                                <li>Date:
                                    <strong><a href="">April 2014</a>
                                    </strong>
                                </li>
                                <li>Service:
                                    <strong><a href="">Web Development</a>
                                    </strong>
                                </li>
                            </ul> -->
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>









<!-- Menu Modals Add New Sa.21.Feb.2015 03:22:25 -->
    <div class="portfolio-modal modal fade" id="portfolioModal2" tabindex="-1" role="dialog" aria-hidden="true" style="padding-right:0px;">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <h1 class="font-style-inline-small-h1">l.g</h1>
                            <hr class="star-primary">
                       <!--     <img src="https://pbs.twimg.com/profile_images/562741191653875712/93TyTG3x.png" class="img-responsive img-centered" alt=""> -->
                            <p class="font-style-inline-small">
                         <!--       Hello, my name is Lucas Gatsas, I'm a Front End Engineer 
                                and Web Developer from Switzerland.
                                <a href="https://www.twitter.com/LucasGatsas">follow</a>. <br> 
                                <a href="https://www.github.com/spaceg">    <i class="fa fa-github"></i> </a> 
                                <a href="https://www.twitter.com/LucasGatsas"><i class="fa fa-twitter"></i> </a>    
                                <a href="https://plus.google.com/101826267816845608605/posts"> <i class="fa fa-google-plus"></i></a>  -->

                    <li><a href="/">Home</a></li>
                    <li><a href="https://spaceg.github.io/about">About Me</a></li>
                    <li><a href="https://spaceg.github.io/archive/">Archive</a></li>
                            </p>
                          <!--  <ul class="list-inline item-details">
                                <li>Client:
                                    <strong><a href="">Start Bootstrap</a>
                                    </strong>
                                </li>
                                <li>Date:
                                    <strong><a href="">April 2014</a>
                                    </strong>
                                </li>
                                <li>Service:
                                    <strong><a href="">Web Development</a>
                                    </strong>
                                </li>
                            </ul> -->
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/lucas-gatsas-15.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Implement Passport.js authentication with Sails.js ~0.10</h1>
                    
                    <h2 class="subheading">Passport.js and sails.js</h2>
                    
                    <span class="meta">Posted by Lucas Gatsas on </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

				<h2 class="section-heading">sailsjs, passportjs, nodejss</h2>

<p>Step 1: dependencies
Add these dependencies to the yourproject/package.json file:</p>

<pre class=" language-javascript"><code class=" language-javascript"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token string">"dependencies"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token string">"bcrypt"</span><span class="token punctuation">:</span> <span class="token string">"~0.8.0"</span><span class="token punctuation">,</span>
    <span class="token string">"passport"</span><span class="token punctuation">:</span> <span class="token string">"~0.2.1"</span><span class="token punctuation">,</span>
    <span class="token string">"passport-local"</span><span class="token punctuation">:</span> <span class="token string">"~1.0.0"</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
</code>
</pre>
<p>Open the terminal, go to your project folder and run:</p>

<p>[sudo] npm install</p>

<p>Step 2: create user model
To create a user model run the following command:</p>

<p>sails generate api user</p>

<p>This will automatically create a model and a controller. You can find the model at yourproject/api/models/User.js. Let’s make that file look like this:</p>

<pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">var</span> bcrypt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bcrypt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    attributes<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        email<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            type<span class="token punctuation">:</span> <span class="token string">'email'</span><span class="token punctuation">,</span>
            required<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>
            unique<span class="token punctuation">:</span> <span class="token keyword">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        password<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            type<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
            minLength<span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
            required<span class="token punctuation">:</span> <span class="token keyword">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        toJSON<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">delete</span> obj<span class="token punctuation">.</span>password<span class="token punctuation">;</span>
            <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    beforeCreate<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        bcrypt<span class="token punctuation">.</span><span class="token function">genSalt</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> salt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            bcrypt<span class="token punctuation">.</span><span class="token function">hash</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>password<span class="token punctuation">,</span> salt<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> hash<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">cb</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    user<span class="token punctuation">.</span>password <span class="token operator">=</span> hash<span class="token punctuation">;</span>
                    <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code>
</pre>

<p>Step 3: create AuthController
Run this command from your terminal: 
sails generate controller auth</p>

<p>Then go to yourproject/api/controllers/AuthController.js and alter it in this way:</p>

<pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">var</span> passport <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'passport'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>

    _config<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        actions<span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">,</span>
        shortcuts<span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">,</span>
        rest<span class="token punctuation">:</span> <span class="token keyword">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    login<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">'local'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">,</span> info<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    message<span class="token punctuation">:</span> info<span class="token punctuation">.</span>message<span class="token punctuation">,</span>
                    user<span class="token punctuation">:</span> user
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            req<span class="token punctuation">.</span><span class="token function">logIn</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    message<span class="token punctuation">:</span> info<span class="token punctuation">.</span>message<span class="token punctuation">,</span>
                    user<span class="token punctuation">:</span> user
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    logout<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        req<span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code>
</pre>

<p>Step 4: create login and signup views
Create this file yourproject/views/signup.ejs:</p>

<pre class=" language-markup"><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Signup<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/user<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code>
</pre>

<p>And then this yourproject/views/login.ejs:</p>

<pre class=" language-markup"><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Login<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/login<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code>
</pre>

<p>These forms look the same, besides the action.</p>

<p>Step 5: configuring the routes
Let’s set up our routes in yourproject/config/routes.js like this:</p>

<pre class=" language-javascript"><code class=" language-javascript">module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>routes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">'/'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    view<span class="token punctuation">:</span> <span class="token string">'homepage'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token string">'get /login'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
       view<span class="token punctuation">:</span> <span class="token string">'login'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token string">'post /login'</span><span class="token punctuation">:</span> <span class="token string">'AuthController.login'</span><span class="token punctuation">,</span>

  <span class="token string">'/logout'</span><span class="token punctuation">:</span> <span class="token string">'AuthController.logout'</span><span class="token punctuation">,</span>

  <span class="token string">'get /signup'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    view<span class="token punctuation">:</span> <span class="token string">'signup'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code>
</pre>

<p>If you notice we are leveraging HTTP verbs, we have two login actions but different routes.</p>

<p>Step 6: configuring Express Middleware
Since we are using Passport we have to customize our middleware in yourproject/config/http.js:</p>

<pre class=" language-javascript"><code class=" language-javascript">module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>http <span class="token operator">=</span> <span class="token punctuation">{</span>
   middleware<span class="token punctuation">:</span> <span class="token punctuation">{</span>

    passportInit    <span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'passport'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    passportSession <span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'passport'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

     order<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">'startRequestTimer'</span><span class="token punctuation">,</span>
            <span class="token string">'cookieParser'</span><span class="token punctuation">,</span>
            <span class="token string">'session'</span><span class="token punctuation">,</span>
            <span class="token string">'passportInit'</span><span class="token punctuation">,</span>     
            <span class="token string">'passportSession'</span><span class="token punctuation">,</span> 
            <span class="token string">'myRequestLogger'</span><span class="token punctuation">,</span>
            <span class="token string">'bodyParser'</span><span class="token punctuation">,</span>
            <span class="token string">'handleBodyParserError'</span><span class="token punctuation">,</span>
            <span class="token string">'compress'</span><span class="token punctuation">,</span>
            <span class="token string">'methodOverride'</span><span class="token punctuation">,</span>
            <span class="token string">'poweredBy'</span><span class="token punctuation">,</span>
            <span class="token string">'router'</span><span class="token punctuation">,</span>
            <span class="token string">'www'</span><span class="token punctuation">,</span>
            <span class="token string">'favicon'</span><span class="token punctuation">,</span>
            <span class="token string">'404'</span><span class="token punctuation">,</span>
            <span class="token string">'500'</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code>
</pre>

<p>Into the order array we added passportInit and passportSession after the session element. The name of this array is quite self-explanatory, the elements must be ordered this way.</p>

<p>Step 7: define Passport local strategy for authentication
Into yourproject/config/ folder let’s create a new file called passport.js:</p>

<pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">var</span> passport <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'passport'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
LocalStrategy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'passport-local'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Strategy<span class="token punctuation">,</span>
bcrypt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bcrypt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

passport<span class="token punctuation">.</span><span class="token function">serializeUser</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

passport<span class="token punctuation">.</span><span class="token function">deserializeUser</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    User<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token punctuation">:</span> id <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">done</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

passport<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LocalStrategy</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    usernameField<span class="token punctuation">:</span> <span class="token string">'email'</span><span class="token punctuation">,</span>
    passwordField<span class="token punctuation">:</span> <span class="token string">'password'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span> password<span class="token punctuation">,</span> done<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    User<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">:</span> email <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">false</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> message<span class="token punctuation">:</span> <span class="token string">'Incorrect email.'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      bcrypt<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>password<span class="token punctuation">,</span> user<span class="token punctuation">.</span>password<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>res<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">false</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
              message<span class="token punctuation">:</span> <span class="token string">'Invalid Password'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">var</span> returnUser <span class="token operator">=</span> <span class="token punctuation">{</span>
            email<span class="token punctuation">:</span> user<span class="token punctuation">.</span>email<span class="token punctuation">,</span>
            createdAt<span class="token punctuation">:</span> user<span class="token punctuation">.</span>createdAt<span class="token punctuation">,</span>
            id<span class="token punctuation">:</span> user<span class="token punctuation">.</span>id
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> returnUser<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            message<span class="token punctuation">:</span> <span class="token string">'Logged In Successfully'</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code>
</pre>

<p>Step 8: add a new policy
Let’s create a new policy isAuthenticated.js into the yourproject/api/policies/ folder:</p>

<pre class=" language-javascript"><code class=" language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code>
</pre>

<p>Briefly, we are telling Sails what to do if a user is not authenticated, then we can bind this policy to any of the controllers in the app.</p>

<p>Step 9: bind the policy to a controller
Let’s create a controller and a model just for testing what we have done. I am going to call this api post.</p>

<p>sails generate api post</p>

<p>Then let’s bind the policy to the PostController by updating yourproject/config/policies.js:</p>

<pre class=" language-javascript"><code class=" language-javascript">module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>policies <span class="token operator">=</span> <span class="token punctuation">{</span>

   <span class="token string">'*'</span><span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>

  <span class="token string">'PostController'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'*'</span><span class="token punctuation">:</span> <span class="token string">'isAuthenticated'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code>
</pre>

<p>Now the ‘GET /post’ route (and all the other routes automatically generated for this controller ) is available only to authenticated users.</p>

<p>Step 10: run a test
Lift your application 
sails lift 
And then go and play with these routes:</p>

<p>http://localhost:1337/post - the very first time it should redirect you to the login page</p>

<p>go to http://localhost:1337/signup for signing up</p>

<p>go to http://localhost:1337/login for logging in</p>

<p>now you should be able to access this page http://localhost:1337/post, even though it’s going to show you just an empty array (there aren’t any posts yet)</p>

<p>go to http://localhost:1337/logout for logging out</p>

<p><a href="https://github.com/iliketomatoes/passport_with_sails">→ Get the repository on Github</a> </p>

<p>I would very much appreciate your comments, especially if you find an error or you need a further explanation.
References:</p>

<p><a href="http://sailsjs.org/#/documentation/concepts">→ Sails.js</a> 
<a href="http://passportjs.org/">→ Passport.js</a> 
<a href="hhttps://github.com/balderdashy/waterline">→ Waterline</a> </p>

<blockquote>When in doubt, use brute force.

        — Ken Thompson

</blockquote>



                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2015/01/16/introduction-less-css/" data-toggle="tooltip" data-placement="top" title="less/css - Introduction">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2015/01/19/github-workflow/" data-toggle="tooltip" data-placement="top" title="Github - Introduction">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>



<hr>

    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/LucasGatsas">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://plus.google.com/101826267816845608605/posts">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-google-plus fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/spaceg">
                            <span class="fa-stack fa-lg">

                              <i class="fa fa-arrow-circle-o-down"></i>
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; l.g 2015 - 2016. <br> 2013, 2014, 2015 </p>
<div class="col-md-12">
     <p class="copyright text-muted"> Running with
    <a href="https://github.com/SpaceG/CleanMagic">CleanMagic Theme by Lucas Gatsas.</a> Hosted on <a href="https://pages.github.com/"> Github</a></p>
    </div>
            </div>
        </div>
    </div>
</footer>
<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<script src="/js/bootstrap.min.js "></script>

<script src="/js/spacegstylesheets.min.js"></script> 

<script type="text/javascript">
  //<![CDATA[
    $(window).load(function() { // makes sure the whole site is loaded
      $('#status').fadeOut(); // will first fade out the loading animation
      $('#preloader').delay(100).fadeOut('fast'); // will fade out the white DIV that covers the website.
      $('body').delay(50).css({'overflow':'visible'});
    })
  //]]>
</script> 
<script>
  !function ($) {
    $(function(){
      window.prettyPrint && prettyPrint()
    })
  }(window.jQuery)
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-53988504-1', 'auto');
  ga('send', 'pageview');

</script>



</body>

</html>
